<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proceso de Compra - Pack&Go</title>
    <link rel="stylesheet" href="style.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="scripts/script.js" defer></script>
    <script src="scripts/script_compra.js" defer></script> 
</head>
<body>

    <header class="main-header">
        <nav class="navbar">
            <div class="logo">
                <i class="fa-solid fa-backpack"></i>
                <span>Pack&Go</span>
            </div>
            <ul class="nav-links">
                <li><a href="index.html" class="active">Inicio</a></li>
                <li><a href="destinos.html">Destinos</a></li>
                <li><a href="experiencias.html">Experiencias</a></li>
                <li><a href="blog.html">Blog</a></li>
            </ul>

            <div class="search-bar">
                <input type="text" placeholder="Buscar destinos">
                <button type="submit">Buscar</button>
            </div>
            <div class="language-selector">
                <button class="lang-btn" id="langToggle">
                    <img src="images/bandera_españa.png" alt="es" class="flag-icon" id="currentFlag">
                    <i class="fa-solid fa-chevron-down arrow-icon"></i>
                </button>
                
                <div class="lang-dropdown" id="langMenu">
                    <a href="#" class="lang-option" data-lang="es" data-src="images/bandera_españa.png">
                        <img src="images/bandera_españa.png" alt="es" class="flag-icon">
                    </a>
                    <a href="#" class="lang-option" data-lang="en" data-src="images/bandera_inglaterra.png">
                        <img src="images/bandera_inglaterra.png" alt="en" class="flag-icon">
                    </a>
                    <a href="#" class="lang-option" data-lang="fr" data-src="images/bandera_francia.png">
                        <img src="images/bandera_francia.png" alt="fr" class="flag-icon">
                    </a>
                </div>
            </div>
            <div class="user-actions">
                <a href="login.html" class="btn-login">Iniciar sesión</a>
                <a href="register.html" class="btn-signup">Crear cuenta</a>
            </div>
        </nav>
    </header>

    <main>
        <div class="back-link-container">
            <a href="experiencias.html"><i class="fa-solid fa-chevron-left"></i> Volver a experiencias</a>
        </div>

        <section class="checkout-section">
            
            <h1 class="page-title-center" id="checkout-title">Datos Personales</h1>

            <div class="stepper-wrapper">
                <div class="stepper-line"></div> 
                
                <div class="step-item active" id="indicator-1" onclick="goToStep(1)" style="cursor: pointer;">
                    <div class="step-circle">1</div>
                    <div class="step-pill">Datos Personales</div>
                </div>

                <div class="step-item" id="indicator-2" onclick="goToStep(2)" style="cursor: pointer;">
                    <div class="step-circle">2</div>
                    <div class="step-pill">Acompañantes</div>
                </div>

                <div class="step-item" id="indicator-3" onclick="goToStep(3)" style="cursor: pointer;">
                    <div class="step-circle">3</div>
                    <div class="step-pill">Pago</div>
                </div>
            </div>

            <div class="checkout-form-container">
                <form action="#" id="checkoutForm">
                    
                    <div id="step-1" class="step-content active">
                        <div class="form-row-3">
                            <div class="input-group"><input type="text" placeholder="Nombre" class="input-gray" required></div>
                            <div class="input-group"><input type="text" placeholder="Apellidos" class="input-gray" required></div>
                            <div class="input-group"><input type="text" placeholder="DNI/NIF" class="input-gray" required></div>
                        </div>
                        <div class="form-row-2">
                            <div class="input-group"><input type="tel" placeholder="Teléfono" class="input-gray" required></div>
                            <div class="input-group"><input type="email" name="user_email" placeholder="Correo electrónico" class="input-gray" required></div>
                            <!-- <div class="input-group"><input type="text" placeholder="Dirección" class="input-gray"></div> -->
                        </div>

                        <div class="checkout-actions">
                            <a href="experiencias.html" class="btn-rounded-outline">Cancelar</a>
                            <button type="button" class="btn-rounded-black" onclick="nextStep(2)">Siguiente paso</button>
                        </div>
                    </div>

                    <div id="step-2" class="step-content">
                        <div class="companions-grid-container">
                            
                            <div class="companion-column">
                                <h3 class="column-title">Acompañantes</h3>
                                
                                <div class="toggle-row">
                                    <label class="toggle-label">
                                        <input type="checkbox" id="check-acompanante" onchange="toggleQuantitySection('check-acompanante', 'qty-wrapper-acompanante', 'list-acompanantes', 'acompanante')">
                                        <span>¿Viajas acompañado?</span>
                                    </label>
                                </div>

                                <div id="qty-wrapper-acompanante" style="display: none; margin-bottom: 20px;">
                                    <label style="font-size: 13px; font-weight: 600;">¿Cuántos acompañantes?</label>
                                    <input type="number" id="num-acompanantes" min="1" max="10" placeholder="1" class="input-gray" 
                                        style="width: 80px; margin-top: 5px;"
                                        oninput="renderDynamicFields('acompanante', 'list-acompanantes')">
                                </div>

                                <div id="list-acompanantes"></div>
                            </div>

                            <div class="companion-column">
                                <h3 class="column-title">Mascotas</h3>
                                
                                <div class="toggle-row">
                                    <label class="toggle-label">
                                        <input type="checkbox" id="check-mascota" onchange="toggleQuantitySection('check-mascota', 'qty-wrapper-mascota', 'list-mascotas', 'mascota')">
                                        <span>¿Viajas con mascota?</span>
                                    </label>
                                </div>

                                <div id="qty-wrapper-mascota" style="display: none; margin-bottom: 20px;">
                                    <label style="font-size: 13px; font-weight: 600;">¿Cuántas mascotas?</label>
                                    <input type="number" id="num-mascotas" min="1" max="5" placeholder="1" class="input-gray" 
                                        style="width: 80px; margin-top: 5px;"
                                        oninput="renderDynamicFields('mascota', 'list-mascotas')">
                                </div>

                                <div id="list-mascotas"></div>
                            </div>

                            <div class="companion-column">
                                <h3 class="column-title">Alergias</h3>
                                <div class="toggle-row">
                                    <label class="toggle-label">
                                        <input type="checkbox" id="check-alergia" onchange="toggleSimpleSection('check-alergia', 'form-alergia')">
                                        <span>¿Tienes alergias?</span>
                                    </label>
                                </div>
                                <div id="form-alergia" style="display: none; margin-top: 15px;">
                                    <div class="input-group">
                                        <textarea placeholder="Describe las alergias..." class="input-gray" style="height: 120px; padding: 10px; resize: none;"></textarea>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="checkout-actions" style="margin-top: 4rem;">
                            <button type="button" class="btn-rounded-outline" onclick="prevStep(1)">Regresar</button>
                            <button type="button" class="btn-rounded-black" onclick="nextStep(3)">Siguiente paso</button>
                        </div>
                    </div>

                    <div id="step-3" class="step-content">
                        <div class="confirmation-grid">
                            <div class="conf-column text-left">
                                <h3 class="column-title">Resumen del viaje</h3>
                                <div class="trip-summary">
                                    <p><strong>Experiencia:</strong> <span id="resumen-titulo">Cargando...</span></p>
                                    <p><strong>Destino:</strong> <span id="resumen-destino">...</span></p>
                                    <p class="summary-text">Tu aventura está a punto de comenzar. Revisa los detalles antes de finalizar.</p>
                                    <p><strong>Duración:</strong> <span id="resumen-duracion">...</span></p>
                                </div>
                            </div>

                            <div class="conf-column center-content">
                                <h3 class="column-title">Coste total</h3>
                                <div class="cost-breakdown">
                                    <div class="cost-row">Base <span id="resumen-precio-base">...</span></div>
                                    <div class="cost-row">Impuestos <span>$0.00</span></div>
                                    <hr class="cost-divider">
                                    <div class="cost-total" id="resumen-total">...</div>
                                </div>
                            </div>

                            <div class="conf-column center-content">
                                <h3 class="column-title">Divisas y Pago</h3>
                                <button type="submit" class="btn-confirm-green" style="margin-top: 20px;">Confirmar compra</button>
                            </div>
                        </div>
                        <div class="checkout-actions" style="margin-top: 4rem;">
                            <button type="button" class="btn-rounded-outline" onclick="prevStep(2)">Regresar</button>
                        </div>
                    </div>

                </form>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            
            <div class="footer-brand">
                <h3>Pack&Go</h3>
                <p>La comunidad donde los caminos se cruzan.</p>
                
                <div class="social-icons">
                    <a href="#"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#"><i class="fa-brands fa-linkedin"></i></a>
                    <a href="#"><i class="fa-solid fa-x"></i></a> </div>
            </div>

            <div class="footer-links">
                <div class="link-column">
                    <h4>Features</h4>
                    <a href="#">Destinos</a>
                    <a href="#">Experiencias</a>
                    <a href="#">Blog</a>
                </div>
                <div class="link-column">
                    <h4>Learn more</h4>
                    <a href="#">Acerca de</a>
                    <a href="#">Nosotros</a>
                </div>
                <div class="link-column">
                    <h4>Support</h4>
                    <a href="#">Contacto</a>
                    <a href="#">Terminos</a>
                    <a href="#">Privacidad</a>
                </div>
            </div>
        </div>
    </footer>

</body>
</html>